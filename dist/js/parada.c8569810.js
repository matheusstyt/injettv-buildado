"use strict";(self["webpackChunkinjettv_vue"]=self["webpackChunkinjettv_vue"]||[]).push([[212],{1506:function(a,t,e){e.r(t),e.d(t,{default:function(){return w}});var o=e(6252),r=e(3577);const l={class:"paradas"},n={class:"center-align"},s={class:"container"},i={class:"flex"},c=(0,o._)("tr",null,[(0,o._)("th",null,"MÁQUINA"),(0,o._)("th",null,"DESCRIÇÃO"),(0,o._)("th",null,"DURAÇÃO (HH:MM:SS)")],-1),d={class:"teste",id:"circle1"},g={class:"ultima-atualizacao"};function u(a,t,e,u,p,m){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("h1",n,"Paradas | Alertas - "+(0,r.zw)(p.galpaoName),1),(0,o._)("div",s,[(0,o._)("table",i,[c,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.pts,((a,t)=>((0,o.wg)(),(0,o.iD)("tr",d,[(0,o._)("td",{style:(0,r.j5)(p.color+a.cor)},[(0,o._)("b",null,(0,r.zw)(a.cdPt),1)],4),(0,o._)("td",{style:(0,r.j5)(p.color+a.cor)},[(0,o._)("b",null,(0,r.zw)(a.descricao),1)],4),(0,o._)("td",{style:(0,r.j5)(p.color+a.cor)},[(0,o._)("b",null,(0,r.zw)(a.tempo),1)],4)])))),256))])]),(0,o._)("div",null,[(0,o._)("h2",g,"Ultima atualizacão: "+(0,r.zw)(p.ultimaAtualizacao),1)])])}e(7658);var p=e(594),m={name:"Maquinas",components:{},created(){},data(){return{errorF(a){sessionStorage.setItem("error",a),window.location.href="/error"},ultimaAtualizacao:null,ip:e(7437).API_URL,galpaoName:sessionStorage.getItem("galpaoName"),cd:"000001",color:"color: ",pts:null,info:null,turno:null,maquinas:void 0,legendaColors1:[{nome:"Parada",color:"#c0392b"},{nome:"Na Meta",color:"#4cd137"},{nome:"Fora da Meta",color:"#f1c40f"},{nome:"Offline",color:"rgb(135, 135, 135)"}],legendaColors2:[{nome:"Em Alerta",color:"#f1c40f"},{nome:"Sem Planejamento",color:"blue"},{nome:"90% Op Concluída",color:"rgb(27, 26, 90)"},{nome:"Planejamneto Concluído",color:"rgb(45, 238, 235)"},{nome:"Índice de Refugo Maior que 5%",color:"rgb(142, 142, 142)"},{nome:"Parada sem Peso na Eficiência",color:"rgb(235, 23, 192)"},{nome:"Parada não Informada",color:"rgb(0, 0, 0)"},{nome:"CIP(Controle Início Processo)",color:"rgb(115, 239, 111)"},{nome:"Sem Ocorrências",color:"#ffff"}]}},methods:{getToday(){var a=new Date,t=String(a.getDate()).padStart(2,"0"),e=String(a.getMonth()+1).padStart(2,"0"),o=a.getFullYear(),r=String(a.getHours()),l=String(a.getMinutes()),n=String(a.getSeconds());return 1==r.length&&(r="0"+r),1==l.length&&(l="0"+l),1==n.length&&(n="0"+n),a=t+"/"+e+"/"+o+"  "+r+":"+l+":"+n,a},async getParadas(){this.ultimaAtualizacao=this.getToday(),await p.Z.all([p.Z.get(`${this.ip}/idw/rest/injet/paradas/pesquisaParadasByGalpao`,{params:{cdGalpao:this.cd}}),p.Z.get(`${this.ip}/idw/rest/injet/alertas/pesquisaAlertasByGalpao`,{params:{cdGalpao:this.cd}})]).then(p.Z.spread(((a,t)=>{let e=[],o=[],r=[],l=[],n="";for(var s=0;s<a.data.paradasGalpao.length;s++){let t=a.data.paradasGalpao[s].tempoParado.split(":");t[0].length<2&&(t[0]="0"+t[0]),t[1].length<2&&(t[1]="0"+t[1]),t[2].length<2&&(t[2]="0"+t[2]),n=t[0]+":"+t[1]+":"+t[2],o.push({cdPt:a.data.paradasGalpao[s].cdInjetora,tempo:n,descricao:a.data.paradasGalpao[s].dsParada,cor:"#ff0000"})}for(var i=0;i<t.data.alertasGalpao.length;i++){let a=t.data.alertasGalpao[i].tempoAlerta.split(":");a[0].length<2&&(a[0]="0"+a[0]),a[1].length<2&&(a[1]="0"+a[1]),a[2].length<2&&(a[2]="0"+a[2]),n=a[0]+":"+a[1]+":"+a[2],e.push({cdPt:t.data.alertasGalpao[i].cdInjetora,tempo:n,descricao:t.data.alertasGalpao[i].dsAlerta,cor:"#ff8b16"})}if(r=r.concat(o,e),"null"!=sessionStorage.getItem("maquinasList")){var c=JSON.parse(sessionStorage.getItem("maquinasList"));c.forEach((a=>{r.forEach((t=>{t.cdPt==a&&l.push(t)}))})),this.info=l,r=l}console.log(r);var d,g=5,u=g,p=0;d=r.filter(((a,t)=>t>=p&&t<u)),this.pts=d,setInterval((()=>{d=r.filter(((a,t)=>t>=p&&t<u)),u+=g,p+=g,0===d.length?"true"==sessionStorage.getItem("produtividade")?window.location.href="/produtividade":"true"==sessionStorage.getItem("maquinas")?window.location.href="/maquinas":window.location.reload():this.pts=d}),15e3)}))).catch((a=>this.errorF(a)))}},mounted(){this.cd=sessionStorage.getItem("galpao"),document.title=`Paradas - ${sessionStorage.getItem("galpaoName")}`,this.getParadas()}},h=e(3744);const f=(0,h.Z)(m,[["render",u]]);var w=f}}]);
//# sourceMappingURL=parada.c8569810.js.map